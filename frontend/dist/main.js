/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./config/config.js":
/*!**************************!*\
  !*** ./config/config.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    host: 'http://localhost:3000/api'\r\n});\n\n//# sourceURL=webpack://frontend/./config/config.js?");

/***/ }),

/***/ "./src/addons/chart-pie.js":
/*!*********************************!*\
  !*** ./src/addons/chart-pie.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CharPies: () => (/* binding */ CharPies)\n/* harmony export */ });\nclass CharPies {\r\n    constructor(operations) {\r\n        this.allOperations = operations;\r\n        this.totalIncomeAmountElement = document.getElementById('totalIncomeAmount');\r\n        this.totalExpenseAmountElement = document.getElementById('totalExpenseAmount');\r\n        this.barColorsValue = [\r\n            \"#d73948\",\r\n            \"#f87e2e\",\r\n            \"#fbbf36\",\r\n            \"#32c699\",\r\n            \"#176ff7\",\r\n            \"#f117f8\",\r\n            \"#641798\",\r\n            \"#4b1b38\",\r\n            \"#ffc193\",\r\n            \"#9a4300\",\r\n            \"#88d375\",\r\n            \"#e17383\",\r\n            \"#0e10ce\",\r\n            \"#a8a8d2\",\r\n            \"#c4a14d\",\r\n            \"#d3f183\",\r\n            \"#b9fdea\",\r\n            \"#ac44ff\",\r\n            \"#b67fa3\",\r\n            \"#72834a\",\r\n            \"#a40000\",\r\n        ];\r\n        this.barColorEmpty = [\"#dadada\"];\r\n\r\n        this.incomesChart = document.getElementById(\"incomesChart\").getContext(\"2d\");\r\n        this.expensesChart = document.getElementById(\"expensesChart\").getContext(\"2d\");\r\n\r\n        this.incomeOperations = this.getOperationsByType('income');\r\n        this.expenseOperations = this.getOperationsByType('expense');\r\n\r\n        const [incomeCategoriesNames, incomeTypeHasValue, incomeCategoriesAmount] = this.prepareTypeData(this.incomeOperations, 'income');\r\n        const [expenseCategoriesNames, expenseTypeHasValue, expenseCategoriesAmount] = this.prepareTypeData(this.expenseOperations, 'expense');\r\n\r\n        this.createChart(this.incomesChart, incomeCategoriesNames, incomeTypeHasValue, incomeCategoriesAmount);\r\n        this.createChart(this.expensesChart, expenseCategoriesNames, expenseTypeHasValue, expenseCategoriesAmount);\r\n\r\n    }\r\n\r\n    createChart(canvasElement, labels, colors, data) {\r\n        new Chart(canvasElement, {\r\n            type: \"pie\",\r\n            data: {\r\n                labels: labels,\r\n                datasets: [{\r\n                    backgroundColor: colors ? this.barColorsValue : this.barColorEmpty,\r\n                    data: data,\r\n                    hoverOffset: 5,\r\n                    borderWidth: 1,\r\n                }],\r\n            },\r\n            options: {\r\n                layout: {\r\n                    padding: {\r\n                        top: -10,\r\n                    }\r\n                },\r\n                title: {\r\n                    display: false,\r\n                    text: \"World Wide Wine Production 2018\"\r\n                },\r\n                radius: 180,\r\n                plugins: {\r\n                    legend: {\r\n                        labels: {\r\n                            color: \"black\",\r\n                            font: {\r\n                                size: 12,\r\n                                weight: 500,\r\n                                family: \"'Roboto', sans-serif\",\r\n                            },\r\n                            boxWidth: 35,\r\n                            padding: 10\r\n                        },\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    getOperationsByType(type) {\r\n        return this.allOperations.filter(operation => {\r\n            return operation.type === type;\r\n        });\r\n    }\r\n\r\n    prepareTypeData(operationsByType, type) {\r\n        const allOperationsArray = this.allOperations;\r\n\r\n        let typeHasValue = true;\r\n        let categoriesNames = [];\r\n        operationsByType.forEach(operation => {\r\n            if (categoriesNames.includes(operation.category)) {\r\n                return;\r\n            }\r\n            categoriesNames.push(operation.category);\r\n        });\r\n        if (categoriesNames.length === 0) {\r\n            categoriesNames[0] = 'Нет данных';\r\n        }\r\n\r\n        let categoriesAmount = [];\r\n        categoriesNames.forEach(category => {\r\n            let categoryAmount = 0;\r\n            for (let i = 0; i < allOperationsArray.length; i++) {\r\n                if (category === allOperationsArray[i].category && allOperationsArray[i].type === type) {\r\n                    categoryAmount += allOperationsArray[i].amount;\r\n                }\r\n            }\r\n            categoriesAmount.push(categoryAmount);\r\n        });\r\n\r\n        let totalCategoriesAmount = null;\r\n        if (categoriesAmount.length > 0 && categoriesAmount[0] === 0) {\r\n            categoriesAmount[0] = 1;\r\n            typeHasValue = false;\r\n            totalCategoriesAmount = 'нет данных';\r\n        } else {\r\n            totalCategoriesAmount = categoriesAmount.reduce((acc, currentValue) => acc + currentValue, 0);\r\n        }\r\n\r\n        if (type === 'income') {\r\n            this.totalIncomeAmountElement.innerText = totalCategoriesAmount === 'нет данных' ? totalCategoriesAmount : totalCategoriesAmount + ' $';\r\n        }\r\n        if (type === 'expense') {\r\n            this.totalExpenseAmountElement.innerText = totalCategoriesAmount === 'нет данных' ? totalCategoriesAmount : totalCategoriesAmount + ' $';\r\n        }\r\n        return [categoriesNames, typeHasValue, categoriesAmount];\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/addons/chart-pie.js?");

/***/ }),

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./router.js */ \"./src/router.js\");\n\r\n\r\nclass App {\r\n    constructor() {\r\n        this.router = new _router_js__WEBPACK_IMPORTED_MODULE_0__.Router();\r\n\r\n        window.addEventListener('DOMContentLoaded', this.handleRoutChanging.bind(this));\r\n        window.addEventListener('popstate', this.handleRoutChanging.bind(this));\r\n    }\r\n\r\n    handleRoutChanging() {\r\n        this.router.openRoute();\r\n    }\r\n}\r\n\r\n(new App());\n\n//# sourceURL=webpack://frontend/./src/app.js?");

/***/ }),

/***/ "./src/components/categories_create.js":
/*!*********************************************!*\
  !*** ./src/components/categories_create.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CategoriesCreate: () => (/* binding */ CategoriesCreate)\n/* harmony export */ });\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n/* harmony import */ var _utils_balance_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/balance.js */ \"./src/utils/balance.js\");\n/* harmony import */ var _utils_userName_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/userName.js */ \"./src/utils/userName.js\");\n\r\n\r\n\r\n\r\n\r\nclass CategoriesCreate {\r\n    constructor(route) {\r\n        this.currentRoute = route;\r\n\r\n        this.createNewIncomeExpenseInputElement = document.querySelector('.category-actions-input');\r\n        this.createNewIncomeExpenseLabelElement = document.getElementById('inputLabel');\r\n        this.cancelButton = document.querySelector('.btn-cancel');\r\n        this.createButton = document.querySelector('.btn-create');\r\n\r\n        this.cancelButton.addEventListener('click', () => {\r\n            location.href = '#/' + this.currentRoute;\r\n        });\r\n        this.createButton.addEventListener('click', () => {\r\n            this.createNewIncomeExpense(this.currentRoute);\r\n        });\r\n\r\n        this.dataInit();\r\n    }\r\n\r\n    async dataInit() {\r\n        await _utils_balance_js__WEBPACK_IMPORTED_MODULE_2__.Balance.showBalance();\r\n        await _utils_userName_js__WEBPACK_IMPORTED_MODULE_3__.UserName.setUserName();\r\n    }\r\n\r\n    async createNewIncomeExpense(route) {\r\n        const currentRoute = route;\r\n        const inputValue = this.createNewIncomeExpenseInputElement.value.trim();\r\n        this.createNewIncomeExpenseInputElement.classList.remove('border-danger');\r\n\r\n        this.invalidIncomeExpenseNameRemove();\r\n\r\n        if (inputValue) {\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/' + currentRoute, 'POST', {\r\n                    title: inputValue\r\n                });\r\n                if (result && result !== 400) location.href = '#/' + currentRoute;\r\n                if (result === 400) {\r\n                    this.createNewIncomeExpenseInputElement.classList.add('border-danger');\r\n                    this.invalidIncomeExpenseName();\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        } else {\r\n            this.createNewIncomeExpenseInputElement.classList.add('border-danger');\r\n        }\r\n    }\r\n\r\n    invalidIncomeExpenseNameRemove() {\r\n        const invalidIncomeExpenseNameElement = document.getElementById('invalidIncomeName');\r\n        if (invalidIncomeExpenseNameElement) invalidIncomeExpenseNameElement.remove();\r\n    }\r\n\r\n    invalidIncomeExpenseName() {\r\n        const invalidIncomeExpenseNameElement = document.createElement('div');\r\n        invalidIncomeExpenseNameElement.className = 'form-invalidUser text-danger d-block text-start w-100';\r\n        invalidIncomeExpenseNameElement.setAttribute('id', 'invalidIncomeName');\r\n        invalidIncomeExpenseNameElement.innerText = 'Такая категория уже есть!';\r\n        this.createNewIncomeExpenseLabelElement.after(invalidIncomeExpenseNameElement);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/categories_create.js?");

/***/ }),

/***/ "./src/components/categories_edit.js":
/*!*******************************************!*\
  !*** ./src/components/categories_edit.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CategoriesEdit: () => (/* binding */ CategoriesEdit)\n/* harmony export */ });\n/* harmony import */ var _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url-manager.js */ \"./src/utils/url-manager.js\");\n/* harmony import */ var _utils_balance_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/balance.js */ \"./src/utils/balance.js\");\n/* harmony import */ var _utils_userName_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/userName.js */ \"./src/utils/userName.js\");\n/* harmony import */ var _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/income-expense-process.js */ \"./src/utils/income-expense-process.js\");\n\r\n\r\n\r\n\r\n\r\nclass CategoriesEdit {\r\n    constructor(route) {\r\n        this.currentRoute = route;\r\n\r\n        this.editIncomeExpenseInputElement = document.querySelector('.category-actions-input');\r\n        this.editIncomeExpenseLabelElement = document.getElementById('inputLabel');\r\n        this.cancelButton = document.querySelector('.btn-cancel');\r\n        this.saveButton = document.querySelector('.btn-save');\r\n\r\n        this.cancelButton.addEventListener('click', () => {\r\n            location.href = '#/' + this.currentRoute;\r\n        });\r\n\r\n        this.currentQueryId = _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_0__.UrlManager.getQueryParams().id;\r\n\r\n        this.dataInit();\r\n    }\r\n\r\n    async dataInit() {\r\n        await _utils_balance_js__WEBPACK_IMPORTED_MODULE_1__.Balance.showBalance();\r\n        await _utils_userName_js__WEBPACK_IMPORTED_MODULE_2__.UserName.setUserName();\r\n\r\n        this.allCurrentTypeCategories = await _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_3__.IncomeExpenseProcess.getCategoriesIncomeExpense(this.currentRoute);\r\n        const requestCurrentCategoryName = await _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_3__.IncomeExpenseProcess.getIncomeExpense(this.currentRoute, this.currentQueryId);\r\n        this.editIncomeExpenseInputElement.value = await requestCurrentCategoryName;\r\n\r\n        await this.editCategory();\r\n    }\r\n\r\n    async editCategory() {\r\n        const requestedInputCategoryName = this.editIncomeExpenseInputElement.value;\r\n        this.saveButton.addEventListener('click', async () => {\r\n            const newInputValue = this.editIncomeExpenseInputElement.value.trim();\r\n            this.editIncomeExpenseInputElement.classList.remove('border-danger');\r\n\r\n            this.invalidIncomeExpenseEditedNameRemove();\r\n            if (!newInputValue) {\r\n                this.editIncomeExpenseInputElement.classList.add('border-danger');\r\n                return;\r\n            }\r\n            if (requestedInputCategoryName === newInputValue) {\r\n                this.editIncomeExpenseInputElement.classList.add('border-danger');\r\n                this.invalidIncomeExpenseEditedName('same');\r\n                return;\r\n            }\r\n            const isNameAlreadyExists = this.allCurrentTypeCategories.find(category => category.title === newInputValue);\r\n            if (isNameAlreadyExists) {\r\n                this.editIncomeExpenseInputElement.classList.add('border-danger');\r\n                this.invalidIncomeExpenseEditedName('exists');\r\n                return;\r\n            }\r\n            this.invalidIncomeExpenseEditedNameRemove();\r\n            _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_3__.IncomeExpenseProcess.editIncomeExpense(this.currentRoute, this.currentQueryId, newInputValue);\r\n        });\r\n    }\r\n\r\n    invalidIncomeExpenseEditedNameRemove() {\r\n        const invalidIncomeExpenseEditedNameElement = document.getElementById('invalidIncomeName');\r\n        if (invalidIncomeExpenseEditedNameElement) {\r\n            invalidIncomeExpenseEditedNameElement.remove();\r\n        }\r\n    }\r\n\r\n    invalidIncomeExpenseEditedName(check) {\r\n        const invalidIncomeExpenseEditedNameElement = document.createElement('div');\r\n        invalidIncomeExpenseEditedNameElement.className = 'form-invalidUser text-danger d-block text-start w-100';\r\n        invalidIncomeExpenseEditedNameElement.setAttribute('id', 'invalidIncomeName');\r\n        if (check === 'same') invalidIncomeExpenseEditedNameElement.innerText = 'Вы указали тоже самое имя категории!';\r\n        if (check === 'exists') invalidIncomeExpenseEditedNameElement.innerText = 'Категория с таким именем уже существует!';\r\n        this.editIncomeExpenseLabelElement.after(invalidIncomeExpenseEditedNameElement);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/categories_edit.js?");

/***/ }),

/***/ "./src/components/categories_main.js":
/*!*******************************************!*\
  !*** ./src/components/categories_main.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CategoriesMain: () => (/* binding */ CategoriesMain)\n/* harmony export */ });\n/* harmony import */ var _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/income-expense-process.js */ \"./src/utils/income-expense-process.js\");\n/* harmony import */ var _utils_balance_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/balance.js */ \"./src/utils/balance.js\");\n/* harmony import */ var _utils_userName_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/userName.js */ \"./src/utils/userName.js\");\n\r\n\r\n\r\n\r\nclass CategoriesMain {\r\n    constructor(route) {\r\n        this.currentRoute = route;\r\n        this.incomeRoute = 'income';\r\n        this.expenseRoute = 'expense';\r\n\r\n        this.dataInit();\r\n\r\n        this.createIncomeExpense(this.currentRoute);\r\n    }\r\n\r\n    async dataInit() {\r\n        await _utils_balance_js__WEBPACK_IMPORTED_MODULE_1__.Balance.showBalance();\r\n        await _utils_userName_js__WEBPACK_IMPORTED_MODULE_2__.UserName.setUserName();\r\n\r\n        const getIncomeExpense = await _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_0__.IncomeExpenseProcess.getCategoriesIncomeExpense(this.currentRoute);\r\n        await _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_0__.IncomeExpenseProcess.createIncomeExpense(getIncomeExpense);\r\n\r\n        await this.deleteIncomeExpense(this.currentRoute);\r\n        await this.editIncomeExpense(this.currentRoute);\r\n    }\r\n\r\n    createIncomeExpense(route) {\r\n        this.createNewIncomeExpenseElement = document.querySelector('.category-item-createNew');\r\n        this.createNewIncomeExpenseElement.addEventListener('click', () => {\r\n            if (route === this.incomeRoute) location.href = '#/income/new';\r\n            if (route === this.expenseRoute) location.href = '#/expense/new';\r\n        });\r\n    }\r\n\r\n    deleteIncomeExpense(route) {\r\n        this.deleteIncomeExpenseButtonElements = document.querySelectorAll('.btn-delete');\r\n        this.deleteIncomeExpenseButtonElements.forEach(button => {\r\n            button.addEventListener('click', () => {\r\n                const incomeId = button.parentElement.parentElement.parentElement.getAttribute('id');\r\n                const categoryName = button.parentElement.previousElementSibling.innerText;\r\n                if (route === this.incomeRoute) {\r\n                    _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_0__.IncomeExpenseProcess.deleteIncomeExpense('income', incomeId, categoryName);\r\n                }\r\n                if (route === this.expenseRoute) {\r\n                    _utils_income_expense_process_js__WEBPACK_IMPORTED_MODULE_0__.IncomeExpenseProcess.deleteIncomeExpense('expense', incomeId, categoryName);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    editIncomeExpense(route) {\r\n        this.editIncomeExpenseButtonElements = document.querySelectorAll('.btn-edit');\r\n        this.editIncomeExpenseButtonElements.forEach(button => {\r\n            button.addEventListener('click', () => {\r\n                const incomeId = button.parentElement.parentElement.parentElement.getAttribute('id');\r\n                if (route === this.incomeRoute) location.href = '#/income/edit' + '?id=' + incomeId;\r\n                if (route === this.expenseRoute) location.href = '#/expense/edit' + '?id=' + incomeId;\r\n            });\r\n        });\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/categories_main.js?");

/***/ }),

/***/ "./src/components/categories_templates.js":
/*!************************************************!*\
  !*** ./src/components/categories_templates.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CategoriesTemplates: () => (/* binding */ CategoriesTemplates)\n/* harmony export */ });\nclass CategoriesTemplates {\r\n    constructor(route) {\r\n        this.currentRoute = route;\r\n        this.incomeRoute = 'income';\r\n        this.expenseRoute = 'expense';\r\n        this.incomeExpenseRoute = 'incomeExpense';\r\n        this.mainRoute = 'main';\r\n\r\n        this.commonElementsDefinition();\r\n        this.commonSideBarTemplate(this.currentRoute);\r\n    }\r\n\r\n    commonElementsDefinition() {\r\n        this.commonTemplateMainElement = document.getElementById('templateMain');\r\n        this.commonTemplateSidebarElement = document.getElementById('templateSidebar');\r\n        this.commonTemplateContentElement = document.getElementById('templateContent');\r\n        this.commonTemplateSideBarNavItemsElements = document.querySelectorAll('.nav-item');\r\n        this.commonTemplateSideBarCategoryButtonElement = document.getElementById('sideBarCategoryButton');\r\n        this.commonTemplateSideBarCategoriesElement = document.getElementById('home-collapse');\r\n        this.commonTemplateLinksIncExpElement = document.querySelectorAll('.sidebar-nav-collapse');\r\n        this.commonTemplateLinkIncomeButtonElement = document.getElementById('linkIncome');\r\n        this.commonTemplateLinkExpenseButtonElement = document.getElementById('linkExpense');\r\n    }\r\n\r\n    commonSideBarTemplate(route) {\r\n        this.commonTemplateMainElement.className = 'd-flex flex-row min-vh-100 position-relative';\r\n        this.commonTemplateSidebarElement.className = 'min-vh-100 sidebar d-flex flex-column justify-content-between flex-shrink-0 border-end';\r\n        this.commonTemplateContentElement.className = 'container h-100 m-0';\r\n        this.commonTemplateSideBarNavItemsElements.forEach(navItem => navItem.classList.remove('nav-item-active'));\r\n        if (route === this.mainRoute || route === this.incomeExpenseRoute) {\r\n            this.commonTemplateSideBarCategoryButtonElement.classList.add('collapsed');\r\n            this.commonTemplateSideBarCategoryButtonElement.setAttribute('aria-expanded', \"false\");\r\n            this.commonTemplateSideBarCategoriesElement.classList.remove('show');\r\n            if (route === this.mainRoute) this.commonTemplateSideBarNavItemsElements[0].classList.add('nav-item-active');\r\n            if (route === this.incomeExpenseRoute) this.commonTemplateSideBarNavItemsElements[1].classList.add('nav-item-active');\r\n        }\r\n        if (route === this.incomeRoute || route === this.expenseRoute) {\r\n            this.commonTemplateSideBarNavItemsElements[2].classList.add('nav-item-active');\r\n            this.commonTemplateSideBarCategoryButtonElement.classList.remove('collapsed');\r\n            this.commonTemplateSideBarCategoryButtonElement.setAttribute('aria-expanded', \"true\");\r\n            this.commonTemplateSideBarCategoriesElement.classList.add('show');\r\n        }\r\n        this.commonTemplateLinksIncExpElement.forEach(link => link.classList.remove('nav-element-active'));\r\n        if (route === this.incomeRoute) {\r\n            this.commonTemplateLinkIncomeButtonElement.classList.add('nav-element-active');\r\n        }\r\n        if (route === this.expenseRoute) {\r\n            this.commonTemplateLinkExpenseButtonElement.classList.add('nav-element-active');\r\n        }\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/categories_templates.js?");

/***/ }),

/***/ "./src/components/create_operation.js":
/*!********************************************!*\
  !*** ./src/components/create_operation.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CreateOperation: () => (/* binding */ CreateOperation)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _operation_actions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./operation_actions.js */ \"./src/components/operation_actions.js\");\n\r\n\r\n\r\nclass CreateOperation {\r\n    constructor(route) {\r\n        this.currentRoute = route;\r\n        this.currentCategory = 'create';\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates('incomeExpense');\r\n        new _operation_actions_js__WEBPACK_IMPORTED_MODULE_1__.OperationActions(this.currentRoute, this.currentCategory);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/create_operation.js?");

/***/ }),

/***/ "./src/components/edit_operation.js":
/*!******************************************!*\
  !*** ./src/components/edit_operation.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EditOperation: () => (/* binding */ EditOperation)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _operation_actions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./operation_actions.js */ \"./src/components/operation_actions.js\");\n\r\n\r\n\r\nclass EditOperation {\r\n    constructor(route) {\r\n        this.currentRoute = route;\r\n        this.currentCategory = 'edit';\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates('incomeExpense');\r\n        new _operation_actions_js__WEBPACK_IMPORTED_MODULE_1__.OperationActions(this.currentRoute, this.currentCategory);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/edit_operation.js?");

/***/ }),

/***/ "./src/components/entranceForm.js":
/*!****************************************!*\
  !*** ./src/components/entranceForm.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EntranceForm: () => (/* binding */ EntranceForm)\n/* harmony export */ });\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n/* harmony import */ var _services_auth_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/auth.js */ \"./src/services/auth.js\");\n\r\n\r\n\r\n\r\nclass EntranceForm {\r\n    constructor(page) {\r\n        this.processButton = null;\r\n        this.rememberMeElement = null;\r\n        this.passwordField = null;\r\n        this.passwordRepeatField = null;\r\n        this.passwordFieldValue = null;\r\n        this.passwordRepeatFieldValue = null;\r\n\r\n        this.allInputs = document.querySelectorAll('.sign-input');\r\n        this.lastInput = this.allInputs[this.allInputs.length - 1];\r\n\r\n        this.page = page;\r\n\r\n        // --------------------------------------------------------------\r\n        const accessToken = localStorage.getItem(_services_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.accessTokenKey);\r\n        if (accessToken) {\r\n            location.href = '#/main';\r\n            return;\r\n        }\r\n        // --------------------------------------------------------------\r\n\r\n        this.fieldsDefinition();\r\n        this.actionsDefinition();\r\n\r\n        this.fieldsEventsDefinition();\r\n    }\r\n\r\n    actionsDefinition() {\r\n        const that = this;\r\n        this.processButton = document.getElementById('processButton');\r\n        this.processButton.addEventListener('click', () => {\r\n            this.processForm();\r\n        });\r\n    }\r\n\r\n    fieldsDefinition() {\r\n        this.fields = [\r\n            {\r\n                name: 'email',\r\n                id: 'email',\r\n                element: null,\r\n                regex: /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/,\r\n                valid: false,\r\n            },\r\n            {\r\n                name: 'password',\r\n                id: 'password',\r\n                element: null,\r\n                regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/,\r\n                valid: false,\r\n            }\r\n        ];\r\n        if (this.page === 'signup') {\r\n            this.fields.unshift({\r\n                name: 'fullName',\r\n                id: 'fullName',\r\n                element: null,\r\n                regex: /[А-Я][а-я]+\\s[А-Я][а-я]+\\s[А-Я][а-я]+/,\r\n                valid: false,\r\n            });\r\n            this.fields.push({\r\n                name: 'passwordRepeat',\r\n                id: 'passwordRepeat',\r\n                element: null,\r\n                regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/,\r\n                valid: false,\r\n            });\r\n        }\r\n    }\r\n\r\n    fieldsEventsDefinition() {\r\n        const that = this;\r\n        this.fields.forEach(field => {\r\n            field.element = document.getElementById(field.id);\r\n            if (field.name === 'password') {\r\n                this.passwordField = field;\r\n\r\n                field.element.onchange = function () {\r\n                    that.passwordFieldValue = field.element.value;\r\n\r\n                    that.validateField.call(that, field, this);\r\n\r\n                    if (that.page === 'signup') {\r\n                        that.validateRepeatPasswordField();\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            if (field.name === 'passwordRepeat') {\r\n                this.passwordRepeatField = field;\r\n\r\n                field.element.onchange = function () {\r\n                    that.passwordRepeatFieldValue = field.element.value;\r\n\r\n                    that.validateRepeatPasswordField();\r\n                }\r\n                return;\r\n            }\r\n            field.element.onchange = function () {\r\n                that.validateField.call(that, field, this);\r\n            }\r\n        });\r\n\r\n        if (this.page === 'login') {\r\n            this.rememberMeElement = document.getElementById('rememberMe');\r\n        }\r\n    }\r\n\r\n    validateField(field, element) {\r\n        if (!element.value || !element.value.match(field.regex)) {\r\n            this.fieldElementInvalid(field, element);\r\n        } else {\r\n            this.fieldElementIsValid(field, element);\r\n        }\r\n        this.validateForm();\r\n    }\r\n\r\n    validateRepeatPasswordField() {\r\n        if (this.passwordRepeatFieldValue !== this.passwordFieldValue || this.passwordField.valid === false) {\r\n            this.fieldElementInvalid(this.passwordRepeatField, this.passwordRepeatField.element);\r\n        } else {\r\n            this.fieldElementIsValid(this.passwordRepeatField, this.passwordRepeatField.element);\r\n        }\r\n        this.validateForm();\r\n    }\r\n\r\n    fieldElementInvalid(field, element) {\r\n        element.classList.remove('border-secondary-subtle');\r\n        element.classList.add('border-danger');\r\n        element.classList.add('border-2');\r\n        field.valid = false;\r\n    }\r\n\r\n    fieldElementIsValid(field, element) {\r\n        element.classList.add('border-secondary-subtle');\r\n        element.classList.remove('border-danger');\r\n        element.classList.remove('border-2');\r\n        field.valid = true;\r\n    }\r\n\r\n    validateForm() {\r\n        const validForm = this.fields.every(field => field.valid);\r\n        const isValid = validForm;\r\n        if (isValid) {\r\n            this.processButton.classList.remove('disabled');\r\n        } else {\r\n            this.processButton.classList.add('disabled');\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    async processForm() {\r\n        if (this.validateForm()) {\r\n            // login\r\n            const emailValue = this.fields.find(field => field.name === 'email').element.value;\r\n            const passwordValue = this.fields.find(field => field.name === 'password').element.value;\r\n            const rememberMeValue = this.rememberMeElement ? this.rememberMeElement.checked : false;\r\n\r\n            this.validUser();\r\n\r\n            if (this.page === 'signup') {\r\n                // add for signup\r\n                const fullNameValue = this.fields.find(field => field.name === 'fullName').element.value;\r\n                const firstName = fullNameValue.split(' ')[1];\r\n                const lastName = fullNameValue.split(' ')[0];\r\n                const passwordRepeatValue = this.fields.find(field => field.name === 'passwordRepeat').element.value;\r\n                try {\r\n                    const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/signup', 'POST', {\r\n                        name: firstName,\r\n                        lastName: lastName,\r\n                        email: emailValue,\r\n                        password: passwordValue,\r\n                        passwordRepeat: passwordRepeatValue\r\n                    });\r\n                    if (result && result !== 400) {\r\n                        if (result.error || !result.user) {\r\n                            throw new Error(result.message);\r\n                        }\r\n                        this.processCompleted();\r\n                        this.processButton.classList.add('disabled');\r\n                    }\r\n                    if (result === 400) {\r\n                        this.invalidUser();\r\n                        return;\r\n                    }\r\n                } catch (error) {\r\n                    return console.log(error);\r\n                }\r\n            }\r\n\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/login', 'POST', {\r\n                    email: emailValue,\r\n                    password: passwordValue,\r\n                    rememberMe: rememberMeValue\r\n                });\r\n                if (result && result !== 400 && result !== 401) {\r\n                    if (result.error ||\r\n                        !result.tokens.accessToken ||\r\n                        !result.tokens.refreshToken ||\r\n                        !result.user.name ||\r\n                        !result.user.lastName ||\r\n                        !result.user.id) {\r\n                        throw new Error(result.message);\r\n                    }\r\n\r\n                    _services_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.setTokens(result.tokens.accessToken, result.tokens.refreshToken);\r\n                    _services_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.setUserInfo(result.user);\r\n\r\n                    if (this.page === 'login') {\r\n                        this.processCompleted();\r\n                        this.processButton.classList.add('disabled');\r\n                    }\r\n\r\n                    if (this.page === 'signup') {\r\n                        setTimeout(() => {\r\n                            this.processCompletedClear();\r\n                            location.href = '#/main';\r\n                        }, 3000);\r\n                        return;\r\n                    }\r\n                    if (this.page === 'login') {\r\n                        setTimeout(() => {\r\n                            this.processCompletedClear();\r\n                            location.href = '#/main';\r\n                        }, 3000);\r\n                        return;\r\n                    }\r\n                }\r\n                if (result === 401 || result === 400) {\r\n                    if (this.page === 'login') {\r\n                        this.invalidUser();\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    invalidUser() {\r\n        const invalidUser = document.createElement('div');\r\n        invalidUser.className = 'form-invalidUser text-danger d-block text-start w-100';\r\n        invalidUser.setAttribute('id', 'invalidUser');\r\n\r\n        if (this.page === 'login') {\r\n            invalidUser.innerText = 'Указаны неверные данные пользователя!';\r\n        }\r\n        if (this.page === 'signup') {\r\n            invalidUser.innerText = 'Пользователь с таким email уже существует!';\r\n        }\r\n\r\n        this.lastInput.after(invalidUser);\r\n    }\r\n\r\n    validUser() {\r\n        const invalidUserElement = document.getElementById('invalidUser');\r\n        if (invalidUserElement) {\r\n            document.getElementById('invalidUser').remove();\r\n        }\r\n    }\r\n\r\n    processCompleted() {\r\n        const processCompleted = document.createElement('div');\r\n        processCompleted.className = 'form-invalidUser text-success d-block text-start w-100';\r\n        processCompleted.setAttribute('id', 'processCompleted');\r\n\r\n        if (this.page === 'signup') {\r\n            processCompleted.innerText = 'Ваш аккаунт успешно зарегистрирован!';\r\n        }\r\n        if (this.page === 'login') {\r\n            processCompleted.innerText = 'Вы успешно вошли в свой аккаунт!';\r\n        }\r\n\r\n        this.lastInput.after(processCompleted);\r\n    }\r\n\r\n    processCompletedClear() {\r\n        const signupCompleted = document.getElementById('processCompleted');\r\n        signupCompleted.remove();\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/entranceForm.js?");

/***/ }),

/***/ "./src/components/expense.js":
/*!***********************************!*\
  !*** ./src/components/expense.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Expense: () => (/* binding */ Expense)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _categories_main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categories_main.js */ \"./src/components/categories_main.js\");\n\r\n\r\n\r\nclass Expense {\r\n    constructor() {\r\n        this.page = 'expense';\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates(this.page);\r\n        new _categories_main_js__WEBPACK_IMPORTED_MODULE_1__.CategoriesMain(this.page);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/expense.js?");

/***/ }),

/***/ "./src/components/expense_create.js":
/*!******************************************!*\
  !*** ./src/components/expense_create.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExpenseCreate: () => (/* binding */ ExpenseCreate)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _categories_create_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categories_create.js */ \"./src/components/categories_create.js\");\n\r\n\r\n\r\nclass ExpenseCreate {\r\n    constructor() {\r\n        this.page = 'expense';\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates(this.page);\r\n        new _categories_create_js__WEBPACK_IMPORTED_MODULE_1__.CategoriesCreate(this.page);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/expense_create.js?");

/***/ }),

/***/ "./src/components/expense_edit.js":
/*!****************************************!*\
  !*** ./src/components/expense_edit.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExpenseEdit: () => (/* binding */ ExpenseEdit)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _categories_edit_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categories_edit.js */ \"./src/components/categories_edit.js\");\n\r\n\r\n\r\nclass ExpenseEdit {\r\n    constructor() {\r\n        this.page = 'expense';\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates(this.page);\r\n        new _categories_edit_js__WEBPACK_IMPORTED_MODULE_1__.CategoriesEdit(this.page);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/expense_edit.js?");

/***/ }),

/***/ "./src/components/income.js":
/*!**********************************!*\
  !*** ./src/components/income.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Income: () => (/* binding */ Income)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _categories_main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categories_main.js */ \"./src/components/categories_main.js\");\n\r\n\r\n\r\nclass Income {\r\n    constructor() {\r\n        this.page = 'income';\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates(this.page);\r\n        new _categories_main_js__WEBPACK_IMPORTED_MODULE_1__.CategoriesMain(this.page);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/income.js?");

/***/ }),

/***/ "./src/components/income_create.js":
/*!*****************************************!*\
  !*** ./src/components/income_create.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncomeCreate: () => (/* binding */ IncomeCreate)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _categories_create_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categories_create.js */ \"./src/components/categories_create.js\");\n\r\n\r\n\r\nclass IncomeCreate {\r\n    constructor() {\r\n        this.page = 'income';\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates(this.page);\r\n        new _categories_create_js__WEBPACK_IMPORTED_MODULE_1__.CategoriesCreate(this.page);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/income_create.js?");

/***/ }),

/***/ "./src/components/income_edit.js":
/*!***************************************!*\
  !*** ./src/components/income_edit.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncomeEdit: () => (/* binding */ IncomeEdit)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _categories_edit_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./categories_edit.js */ \"./src/components/categories_edit.js\");\n\r\n\r\n\r\nclass IncomeEdit {\r\n    constructor() {\r\n        this.page = 'income';\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates(this.page);\r\n        new _categories_edit_js__WEBPACK_IMPORTED_MODULE_1__.CategoriesEdit(this.page);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/income_edit.js?");

/***/ }),

/***/ "./src/components/income_expense.js":
/*!******************************************!*\
  !*** ./src/components/income_expense.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncomeExpense: () => (/* binding */ IncomeExpense)\n/* harmony export */ });\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _utils_balance_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/balance.js */ \"./src/utils/balance.js\");\n/* harmony import */ var _utils_userName_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/userName.js */ \"./src/utils/userName.js\");\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass IncomeExpense {\r\n    constructor() {\r\n        this.filterButtonElements = document.querySelectorAll('.filterButton');\r\n        this.filterDateFromInputElement = document.getElementById('filterDateFrom');\r\n        this.intervalFilterInputConfig(this.filterDateFromInputElement);\r\n        this.filterDateToInputElement = document.getElementById('filterDateTo');\r\n        this.intervalFilterInputConfig(this.filterDateToInputElement);\r\n        this.filterDateElement = document.querySelector('.filter-date');\r\n\r\n        this.operationsTableBody = document.getElementById('tableBody');\r\n\r\n        this.createNewIncomeButtonElement = document.querySelector('.btn-createIncome');\r\n        this.createNewIncomeButtonElement.addEventListener('click', () => location.href = '#/operations/create_income');\r\n        this.createNewExpenseButtonElement = document.querySelector('.btn-createExpense');\r\n        this.createNewExpenseButtonElement.addEventListener('click', () => location.href = '#/operations/create_expense');\r\n\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_0__.CategoriesTemplates('incomeExpense');\r\n\r\n        this.chooseFilter();\r\n        this.dataInit();\r\n    }\r\n\r\n    async dataInit() {\r\n        await _utils_balance_js__WEBPACK_IMPORTED_MODULE_1__.Balance.showBalance();\r\n        await _utils_userName_js__WEBPACK_IMPORTED_MODULE_2__.UserName.setUserName();\r\n        await this.updateWithFilter('today');\r\n    }\r\n\r\n    chooseFilter() {\r\n        const that = this;\r\n        this.filterButtonElements.forEach(button => {\r\n            if (button.getAttribute('id') !== 'interval') {\r\n                button.addEventListener('click', function () {\r\n                    that.clearInvalidIntervalFilter();\r\n                    that.filterButtonElements.forEach(btn => btn.classList.remove('active'));\r\n                    this.classList.add('active');\r\n                    that.updateWithFilter(this.getAttribute('id'));\r\n                });\r\n            }\r\n            if (button.getAttribute('id') === 'interval') {\r\n                button.addEventListener('click', function () {\r\n                    that.filterButtonElements.forEach(btn => btn.classList.remove('active'));\r\n                    this.classList.add('active');\r\n                    // that.operationsTableBody.innerHTML = '';\r\n                    const isFilterIntervalValid = that.validateIntervalFilter();\r\n                    if (isFilterIntervalValid) {\r\n                        that.updateWithFilter(this.getAttribute('id'));\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    validateIntervalFilter() {\r\n        const filterDateFromValue = this.filterDateFromInputElement.value;\r\n        const filterDateToValue = this.filterDateToInputElement.value;\r\n        const regex = /^[0-9]{2}.[0-9]{2}.[0-9]{4}$/;\r\n\r\n        this.filterDateFromInputElement.classList.remove('filterDateEmpty');\r\n        let dateFromIsValid = false;\r\n        this.filterDateToInputElement.classList.remove('filterDateEmpty');\r\n        let dateToIsValid = false;\r\n\r\n        const filterInvalidIntervalElement = document.querySelector('.filterInvalidInterval');\r\n        if (filterInvalidIntervalElement) {\r\n            filterInvalidIntervalElement.remove();\r\n        }\r\n\r\n        if (!filterDateFromValue || !regex.test(filterDateFromValue)) {\r\n            this.filterDateFromInputElement.classList.add('filterDateEmpty');\r\n            dateFromIsValid = false;\r\n        } else {\r\n            dateFromIsValid = true;\r\n        }\r\n        if (!filterDateToValue || !regex.test(filterDateToValue)) {\r\n            this.filterDateToInputElement.classList.add('filterDateEmpty');\r\n            dateToIsValid = false;\r\n        } else {\r\n            dateToIsValid = true;\r\n        }\r\n\r\n        if (dateFromIsValid && dateToIsValid) {\r\n            return true;\r\n        } else {\r\n            const filterInvalidInterval = document.createElement('p');\r\n            filterInvalidInterval.className = 'm-0 filterInvalidInterval';\r\n            filterInvalidInterval.innerText = 'Формат: дд.мм.гггг';\r\n            this.filterDateElement.appendChild(filterInvalidInterval);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    clearInvalidIntervalFilter() {\r\n        const filterInvalidIntervalElement = document.querySelector('.filterInvalidInterval');\r\n        if (filterInvalidIntervalElement) {\r\n            filterInvalidIntervalElement.remove();\r\n        }\r\n        this.filterDateFromInputElement.classList.remove('filterDateEmpty');\r\n        this.filterDateToInputElement.classList.remove('filterDateEmpty');\r\n        // this.filterDateFromInputElement.value = '';\r\n        // this.filterDateToInputElement.value = '';\r\n    }\r\n\r\n    intervalFilterInputConfig(inputElement) {\r\n        const regex = /[0-9.]/;\r\n        inputElement.addEventListener('keydown', function (event) {\r\n            if (!regex.test(event.key) && event.key.toLowerCase() !== 'backspace' && event.key.toLowerCase() !== 'arrowleft' && event.key.toLowerCase() !== 'arrowright' && event.key.toLowerCase() !== 'tab') {\r\n                event.preventDefault();\r\n            }\r\n        });\r\n    }\r\n\r\n    async updateWithFilter(filter) {\r\n        let queryParamsPeriod = null;\r\n        let dateFromSrc = this.filterDateFromInputElement.value.split('.');\r\n        let dateFromOutput = `${dateFromSrc[2]}-${dateFromSrc[1]}-${dateFromSrc[0]}`;\r\n        let dateToSrc = this.filterDateToInputElement.value.split('.');\r\n        let dateToOutput = `${dateToSrc[2]}-${dateToSrc[1]}-${dateToSrc[0]}`;\r\n\r\n        let today = new Date();\r\n        let todayYear = today.getFullYear();\r\n        let todayMonth = today.getMonth() < 9 ? ('0' + (today.getMonth() + 1)) : (today.getMonth() + 1);\r\n        let todayDay = today.getDate() < 10 ? ('0' + today.getDate()) : today.getDate();\r\n\r\n        let todayFilter = `${todayYear}-${todayMonth}-${todayDay}`;\r\n\r\n        switch (filter) {\r\n            case 'today':\r\n                queryParamsPeriod = 'period=interval&dateFrom=' + todayFilter + '&dateTo=' + todayFilter;\r\n                break;\r\n            case 'week':\r\n                queryParamsPeriod = 'period=week';\r\n                break;\r\n            case 'month':\r\n                queryParamsPeriod = 'period=month';\r\n                break;\r\n            case 'year':\r\n                queryParamsPeriod = 'period=year';\r\n                break;\r\n            case 'all':\r\n                queryParamsPeriod = 'period=all';\r\n                break;\r\n            case 'interval':\r\n                queryParamsPeriod = 'period=interval&dateFrom=' + dateFromOutput + '&dateTo=' + dateToOutput;\r\n                break;\r\n        }\r\n        try {\r\n            const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_3__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].host + '/operations?' + queryParamsPeriod);\r\n            if (result && result !== 400) {\r\n                this.createIncomeExpenseOperations(result);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    createIncomeExpenseOperations(array) {\r\n        this.operationsTableBody.innerHTML = '';\r\n        if (array && array.length > 0) {\r\n            array.forEach((operation, index) => {\r\n                const tr = document.createElement('tr');\r\n                tr.setAttribute('id', operation.id);\r\n                tr.className = 'operation-element';\r\n\r\n                const th = document.createElement('th');\r\n                th.setAttribute('scope', \"row\");\r\n                th.innerText = index + 1;\r\n\r\n                const tdType = document.createElement('td');\r\n                tdType.className = operation.type === 'income' ? 'text-success' : 'text-danger';\r\n                tdType.innerText = operation.type === 'income' ? 'доход' : 'расход';\r\n\r\n                const tdCategory = document.createElement('td');\r\n                tdCategory.innerText = operation.category;\r\n\r\n                const tdAmount = document.createElement('td');\r\n                tdAmount.innerText = operation.amount;\r\n\r\n                const tdDate = document.createElement('td');\r\n                const dateSrc = operation.date.split('-');\r\n                tdDate.innerText = dateSrc[2] + '.' + dateSrc[1] + '.' + dateSrc[0];\r\n\r\n                const tdComment = document.createElement('td');\r\n                tdComment.innerText = operation.comment;\r\n\r\n                const tdActions = document.createElement('td');\r\n\r\n                const divActions = document.createElement('div');\r\n                divActions.className = 'operations-icons d-flex flex-row justify-content-end align-items-center';\r\n\r\n                const aDelete = document.createElement('div');\r\n                aDelete.className = 'deleteOperation d-flex justify-content-center align-items-center';\r\n                const imgDelete = document.createElement('img');\r\n                imgDelete.setAttribute('src', '../static/images/icon-delete.png');\r\n                imgDelete.setAttribute('alt', 'Удалить');\r\n                aDelete.addEventListener('click', () => {\r\n                    this.deleteIncomeExpense(tr.getAttribute('id'));\r\n                });\r\n\r\n                const aEdit = document.createElement('div');\r\n                aEdit.className = 'editOperation d-flex justify-content-center align-items-center';\r\n                const imgEdit = document.createElement('img');\r\n                imgEdit.setAttribute('src', '../static/images/icon-edit.png');\r\n                imgEdit.setAttribute('alt', 'Удалить');\r\n                aEdit.addEventListener('click', () => {\r\n                    const operationType = operation.type === 'income' ? 'income' : 'expense';\r\n                    location.href = '#/operations/edit_operation' + '?id=' + operation.id;\r\n                });\r\n\r\n                tr.appendChild(th);\r\n                tr.appendChild(tdType);\r\n                tr.appendChild(tdCategory);\r\n                tr.appendChild(tdAmount);\r\n                tr.appendChild(tdDate);\r\n                tr.appendChild(tdComment);\r\n                tr.appendChild(tdActions);\r\n                tdActions.appendChild(divActions);\r\n                divActions.appendChild(aDelete);\r\n                aDelete.appendChild(imgDelete);\r\n                divActions.appendChild(aEdit);\r\n                aEdit.appendChild(imgEdit);\r\n\r\n                this.operationsTableBody.appendChild(tr);\r\n            });\r\n        }\r\n    }\r\n\r\n    deleteIncomeExpense(id) {\r\n        const templateContentElement = document.getElementById('templateContent');\r\n        const modalWrapper = document.createElement('div');\r\n\r\n        modalWrapper.className = 'show action-modal position-absolute h-100 w-100 align-items-center justify-content-center';\r\n        modalWrapper.setAttribute('id', 'modalIncomeExpense');\r\n\r\n        const modalContent = document.createElement('div');\r\n        modalContent.className = 'action-modal-content modal-content bg-body';\r\n\r\n        const modalBody = document.createElement('div');\r\n        modalBody.className = 'modal-body d-flex flex-column justify-content-between align-items-center';\r\n\r\n        const modalText = document.createElement('p');\r\n        modalText.className = 'action-modal-text m-0';\r\n        modalText.innerText = 'Вы действительно хотите удалить операцию?';\r\n\r\n        const modalActionWrapper = document.createElement('div');\r\n        modalActionWrapper.className = 'action-buttons d-flex justify-content-center';\r\n\r\n        const actionEdit = document.createElement('button');\r\n        actionEdit.className = 'btn-common btn-modal-delete btn border-0 btn-success';\r\n        actionEdit.innerText = 'Да, удалить';\r\n\r\n        const actionCancel = document.createElement('button');\r\n        actionCancel.className = 'btn-common btn-modal-no-delete btn border-0 btn-danger';\r\n        actionCancel.setAttribute('id', 'balanceActionCancel');\r\n        actionCancel.innerText = 'Не удалять';\r\n\r\n        modalWrapper.appendChild(modalContent);\r\n        modalContent.appendChild(modalBody);\r\n        modalBody.appendChild(modalText);\r\n        modalBody.appendChild(modalActionWrapper);\r\n        modalActionWrapper.appendChild(actionEdit);\r\n        modalActionWrapper.appendChild(actionCancel);\r\n\r\n        templateContentElement.after(modalWrapper);\r\n\r\n        modalWrapper.addEventListener('click', (event) => {\r\n            if (event.eventPhase === 2) {\r\n                this.removeModalIncomeExpense();\r\n            }\r\n        });\r\n        actionCancel.addEventListener('click', () => {\r\n            this.removeModalIncomeExpense();\r\n        });\r\n        actionEdit.addEventListener('click', async () => {\r\n            let currentFilter = null;\r\n            for (const filter of this.filterButtonElements) {\r\n                if (filter.classList.contains('active')) {\r\n                    currentFilter = filter;\r\n                    break;\r\n                }\r\n            }\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_3__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].host + '/operations/' + id, 'DELETE');\r\n                if (result && result !== 404) {\r\n                    modalWrapper.remove();\r\n                    await this.updateWithFilter(currentFilter.getAttribute('id'));\r\n                    await _utils_balance_js__WEBPACK_IMPORTED_MODULE_1__.Balance.showBalance();\r\n                } else {\r\n                    console.log(result);\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    removeModalIncomeExpense() {\r\n        document.querySelectorAll('#modalIncomeExpense').forEach(element => element.remove());\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/income_expense.js?");

/***/ }),

/***/ "./src/components/login.js":
/*!*********************************!*\
  !*** ./src/components/login.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Login: () => (/* binding */ Login)\n/* harmony export */ });\nclass Login {\r\n    constructor() {\r\n        this.templateContentElement = document.getElementById('templateContent');\r\n        this.templateMainElement = document.getElementById('templateMain');\r\n        this.templateSidebarElement = document.getElementById('templateSidebar');\r\n\r\n        this.templateLoginSignup();\r\n    }\r\n\r\n    templateLoginSignup() {\r\n        this.templateMainElement.className = '';\r\n        this.templateSidebarElement.classList.add('d-none');\r\n        this.templateContentElement.className = '';\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/login.js?");

/***/ }),

/***/ "./src/components/main.js":
/*!********************************!*\
  !*** ./src/components/main.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Main: () => (/* binding */ Main)\n/* harmony export */ });\n/* harmony import */ var _utils_balance_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/balance.js */ \"./src/utils/balance.js\");\n/* harmony import */ var _utils_userName_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/userName.js */ \"./src/utils/userName.js\");\n/* harmony import */ var _categories_templates_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./categories_templates.js */ \"./src/components/categories_templates.js\");\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n/* harmony import */ var _addons_chart_pie_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../addons/chart-pie.js */ \"./src/addons/chart-pie.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Main {\r\n    constructor() {\r\n        this.incomeChartWrapperElement = document.querySelector('.incomes-chart-wrapper');\r\n        this.expenseChartWrapperElement = document.querySelector('.expenses-chart-wrapper');\r\n        this.filterButtonElements = document.querySelectorAll('.filterButton');\r\n        this.filterDateFromInputElement = document.getElementById('filterDateFrom');\r\n        this.intervalFilterInputConfig(this.filterDateFromInputElement);\r\n        this.filterDateToInputElement = document.getElementById('filterDateTo');\r\n        this.intervalFilterInputConfig(this.filterDateToInputElement);\r\n        this.filterDateElement = document.querySelector('.filter-date');\r\n\r\n        new _categories_templates_js__WEBPACK_IMPORTED_MODULE_2__.CategoriesTemplates('main');\r\n\r\n        this.chooseFilter();\r\n        this.dataInit();\r\n    }\r\n\r\n    async dataInit() {\r\n        await _utils_balance_js__WEBPACK_IMPORTED_MODULE_0__.Balance.showBalance();\r\n        await _utils_userName_js__WEBPACK_IMPORTED_MODULE_1__.UserName.setUserName();\r\n        await this.updateWithFilter('today');\r\n    }\r\n\r\n    chooseFilter() {\r\n        const that = this;\r\n        this.filterButtonElements.forEach(button => {\r\n            if (button.getAttribute('id') !== 'interval') {\r\n                button.addEventListener('click', function () {\r\n                    that.clearInvalidIntervalFilter();\r\n                    that.filterButtonElements.forEach(btn => btn.classList.remove('active'));\r\n                    this.classList.add('active');\r\n                    that.updateWithFilter(this.getAttribute('id'));\r\n                });\r\n            }\r\n            if (button.getAttribute('id') === 'interval') {\r\n                button.addEventListener('click', function () {\r\n                    that.filterButtonElements.forEach(btn => btn.classList.remove('active'));\r\n                    this.classList.add('active');\r\n                    // that.removeIncomeExpenseCanvas();\r\n                    const isFilterIntervalValid = that.validateIntervalFilter();\r\n                    if (isFilterIntervalValid) {\r\n                        that.updateWithFilter(this.getAttribute('id'));\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    clearInvalidIntervalFilter() {\r\n        const filterInvalidIntervalElement = document.querySelector('.filterInvalidInterval');\r\n        if (filterInvalidIntervalElement) {\r\n            filterInvalidIntervalElement.remove();\r\n        }\r\n        this.filterDateFromInputElement.classList.remove('filterDateEmpty');\r\n        this.filterDateToInputElement.classList.remove('filterDateEmpty');\r\n    }\r\n\r\n    validateIntervalFilter() {\r\n        const filterDateFromValue = this.filterDateFromInputElement.value;\r\n        const filterDateToValue = this.filterDateToInputElement.value;\r\n        const regex = /^[0-9]{2}.[0-9]{2}.[0-9]{4}$/;\r\n\r\n        this.filterDateFromInputElement.classList.remove('filterDateEmpty');\r\n        let dateFromIsValid = false;\r\n        this.filterDateToInputElement.classList.remove('filterDateEmpty');\r\n        let dateToIsValid = false;\r\n\r\n        const filterInvalidIntervalElement = document.querySelector('.filterInvalidInterval');\r\n        if (filterInvalidIntervalElement) {\r\n            filterInvalidIntervalElement.remove();\r\n        }\r\n\r\n        if (!filterDateFromValue || !regex.test(filterDateFromValue)) {\r\n            this.filterDateFromInputElement.classList.add('filterDateEmpty');\r\n            dateFromIsValid = false;\r\n        } else {\r\n            dateFromIsValid = true;\r\n        }\r\n        if (!filterDateToValue || !regex.test(filterDateToValue)) {\r\n            this.filterDateToInputElement.classList.add('filterDateEmpty');\r\n            dateToIsValid = false;\r\n        } else {\r\n            dateToIsValid = true;\r\n        }\r\n\r\n        if (dateFromIsValid && dateToIsValid) {\r\n            return true;\r\n        } else {\r\n            const filterInvalidInterval = document.createElement('p');\r\n            filterInvalidInterval.className = 'm-0 filterInvalidInterval';\r\n            filterInvalidInterval.innerText = 'Формат: дд.мм.гггг';\r\n            this.filterDateElement.appendChild(filterInvalidInterval);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    async updateWithFilter(filter) {\r\n        let queryParamsPeriod = null;\r\n        let dateFromSrc = this.filterDateFromInputElement.value.split('.');\r\n        let dateFromOutput = `${dateFromSrc[2]}-${dateFromSrc[1]}-${dateFromSrc[0]}`;\r\n        let dateToSrc = this.filterDateToInputElement.value.split('.');\r\n        let dateToOutput = `${dateToSrc[2]}-${dateToSrc[1]}-${dateToSrc[0]}`;\r\n\r\n        let today = new Date();\r\n        let todayYear = today.getFullYear();\r\n        let todayMonth = today.getMonth() < 9 ? ('0' + (today.getMonth() + 1)) : (today.getMonth() + 1);\r\n        let todayDay = today.getDate() < 10 ? ('0' + today.getDate()) : today.getDate();\r\n\r\n        let todayFilter = `${todayYear}-${todayMonth}-${todayDay}`;\r\n\r\n        switch (filter) {\r\n            case 'today':\r\n                queryParamsPeriod = 'period=interval&dateFrom=' + todayFilter + '&dateTo=' + todayFilter;\r\n                break;\r\n            case 'week':\r\n                queryParamsPeriod = 'period=week';\r\n                break;\r\n            case 'month':\r\n                queryParamsPeriod = 'period=month';\r\n                break;\r\n            case 'year':\r\n                queryParamsPeriod = 'period=year';\r\n                break;\r\n            case 'all':\r\n                queryParamsPeriod = 'period=all';\r\n                break;\r\n            case 'interval':\r\n                queryParamsPeriod = 'period=interval&dateFrom=' + dateFromOutput + '&dateTo=' + dateToOutput;\r\n                break;\r\n        }\r\n        try {\r\n            const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_3__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].host + '/operations?' + queryParamsPeriod);\r\n            if (result && result !== 400) {\r\n                this.makeChartPies(result)\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    intervalFilterInputConfig(inputElement) {\r\n        const regex = /[0-9.]/;\r\n        inputElement.addEventListener('keydown', function (event) {\r\n            if (!regex.test(event.key) && event.key.toLowerCase() !== 'backspace' && event.key.toLowerCase() !== 'arrowleft' && event.key.toLowerCase() !== 'arrowright' && event.key.toLowerCase() !== 'tab') {\r\n                event.preventDefault();\r\n            }\r\n        });\r\n    }\r\n\r\n    makeChartPies(operations) {\r\n        this.removeIncomeExpenseCanvas();\r\n        this.createIncomeExpenseCanvas();\r\n        new _addons_chart_pie_js__WEBPACK_IMPORTED_MODULE_5__.CharPies(operations);\r\n    }\r\n\r\n    createIncomeExpenseCanvas() {\r\n        const canvasIncome = document.createElement('canvas');\r\n        canvasIncome.className = 'incomes-chart';\r\n        canvasIncome.setAttribute('id', 'incomesChart');\r\n        this.incomeChartWrapperElement.appendChild(canvasIncome);\r\n\r\n        const canvasExpense = document.createElement('canvas');\r\n        canvasExpense.className = 'expenses-chart';\r\n        canvasExpense.setAttribute('id', 'expensesChart');\r\n        this.expenseChartWrapperElement.appendChild(canvasExpense);\r\n    }\r\n\r\n    removeIncomeExpenseCanvas() {\r\n        const incomeChartWrapperElement = document.getElementById('incomesChart');\r\n        const expenseChartWrapperElement = document.getElementById('expensesChart');\r\n        if (incomeChartWrapperElement) {\r\n            incomeChartWrapperElement.remove();\r\n        }\r\n        if (expenseChartWrapperElement) {\r\n            expenseChartWrapperElement.remove();\r\n        }\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/main.js?");

/***/ }),

/***/ "./src/components/operation_actions.js":
/*!*********************************************!*\
  !*** ./src/components/operation_actions.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperationActions: () => (/* binding */ OperationActions)\n/* harmony export */ });\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n/* harmony import */ var _utils_balance_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/balance.js */ \"./src/utils/balance.js\");\n/* harmony import */ var _utils_userName_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/userName.js */ \"./src/utils/userName.js\");\n/* harmony import */ var _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/url-manager.js */ \"./src/utils/url-manager.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass OperationActions {\r\n    constructor(route, category) {\r\n        this.currentRoute = route;\r\n        this.currentCategory = category;\r\n\r\n        this.operationTitleElement = document.getElementById('operationTitle');\r\n        this.operationTypeInputSelectorElement = document.getElementById('operationType');\r\n        this.operationTypeSelectIncome = document.getElementById('selectIncome');\r\n        this.operationTypeSelectExpense = document.getElementById('selectExpense');\r\n        this.operationCategoryInputElement = document.getElementById('operationCategory');\r\n        this.operationAmountInputElement = document.getElementById('operationAmount');\r\n        this.operationDateInputElement = document.getElementById('operationDate');\r\n        this.operationCommentElement = document.getElementById('operationComment');\r\n        this.createButton = document.querySelector('.btn-create');\r\n        this.cancelButton = document.querySelector('.btn-cancel');\r\n        this.cancelButton.addEventListener('click', () => location.href = '#/operations');\r\n\r\n        const queryParams = _utils_url_manager_js__WEBPACK_IMPORTED_MODULE_4__.UrlManager.getQueryParams();\r\n        this.currentId = queryParams.id;\r\n        this.saveButton = document.querySelector('.btn-save');\r\n\r\n        this.prepareCreateEditForm(this.currentCategory);\r\n        this.createEditOperation(this.currentCategory, this.currentId);\r\n\r\n        this.dataInit();\r\n    }\r\n\r\n    async dataInit() {\r\n        await _utils_balance_js__WEBPACK_IMPORTED_MODULE_2__.Balance.showBalance();\r\n        await _utils_userName_js__WEBPACK_IMPORTED_MODULE_3__.UserName.setUserName();\r\n        if (this.currentCategory === 'create') {\r\n            await this.showCurrentCategory();\r\n        }\r\n        if (this.currentCategory === 'edit') {\r\n            await this.fillCurrentOperation();\r\n        }\r\n    }\r\n\r\n    prepareCreateEditForm(category) {\r\n        if (category === 'create') {\r\n            if (this.currentRoute === 'income') {\r\n                this.operationTypeSelectIncome.setAttribute('selected', 'selected');\r\n                this.operationTitleElement.innerText = 'Создание дохода';\r\n            }\r\n            if (this.currentRoute === 'expense') {\r\n                this.operationTypeSelectExpense.setAttribute('selected', 'selected');\r\n                this.operationTitleElement.innerText = 'Создание расхода';\r\n            }\r\n        }\r\n        if (category === 'edit') {\r\n            this.operationTypeInputSelectorElement.removeAttribute('disabled');\r\n            this.operationTypeInputSelectorElement.classList.remove('disabledSelect');\r\n        }\r\n    }\r\n\r\n    createEditOperation(category, id) {\r\n        // create\r\n        let button = this.createButton;\r\n        let url = '/operations';\r\n        let method = 'POST';\r\n        // edit\r\n        if (category === 'edit') {\r\n            button = this.saveButton;\r\n            url = '/operations/' + id;\r\n            method = 'PUT';\r\n        }\r\n        button.addEventListener('click', async () => {\r\n            const operationTypeInputValue = this.operationTypeInputSelectorElement.value;\r\n            const operationCategoryInputValue = parseInt(this.operationCategoryInputElement.value);\r\n            const operationAmountInputValue = parseInt(this.operationAmountInputElement.value.trim());\r\n            const operationDateInputValue = this.operationDateInputElement.value;\r\n            const operationCommentValue = this.operationCommentElement.value;\r\n\r\n            const areFieldsValid = this.validateAllFields();\r\n            if (areFieldsValid) {\r\n                try {\r\n                    const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + url, method, {\r\n                        type: operationTypeInputValue,\r\n                        category_id: operationCategoryInputValue,\r\n                        amount: operationAmountInputValue,\r\n                        date: operationDateInputValue,\r\n                        comment: operationCommentValue\r\n                    });\r\n                    if (result) {\r\n                        location.href = '#/operations';\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    async showCurrentCategory() {\r\n        try {\r\n            const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/' + this.operationTypeInputSelectorElement.value);\r\n            if (result) {\r\n                this.addCategories(result);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    addCategories(array) {\r\n        if (array && array.length > 0) {\r\n            array.forEach(category => {\r\n                const option = document.createElement('option');\r\n                option.setAttribute('value', category.id);\r\n                option.classList.add('operationCategoryOption');\r\n                option.innerText = category.title;\r\n                this.operationCategoryInputElement.appendChild(option);\r\n            });\r\n        }\r\n    }\r\n\r\n    async fillCurrentOperation() {\r\n        try {\r\n            const currentOperation = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/operations/' + this.currentId);\r\n            if (currentOperation) {\r\n                await this.setCurrentOperationType(currentOperation);\r\n                await this.requestCategoriesSelectorEvent();\r\n                await this.showCurrentCategory();\r\n                await this.fillEditForm(currentOperation);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    setCurrentOperationType(operation) {\r\n        if (operation.type === 'income') this.operationTypeSelectIncome.setAttribute('selected', 'selected');\r\n        if (operation.type === 'expense') this.operationTypeSelectExpense.setAttribute('selected', 'selected');\r\n    }\r\n\r\n    requestCategoriesSelectorEvent() {\r\n        const that = this;\r\n        this.operationTypeInputSelectorElement.addEventListener('change', async () => {\r\n            that.defaultCategories();\r\n            if (this.operationTypeInputSelectorElement.value) {\r\n                try {\r\n                    const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/' + this.operationTypeInputSelectorElement.value)\r\n                    if (result) {\r\n                        that.addCategories(result);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    fillEditForm(operation) {\r\n        // category\r\n        const operationCategories = document.querySelectorAll('.operationCategoryOption');\r\n        let currentOperationCategory = null;\r\n        for (const category of operationCategories) {\r\n            if (category.innerText === operation.category) {\r\n                currentOperationCategory = category;\r\n                break;\r\n            }\r\n        }\r\n        if (currentOperationCategory) {\r\n            currentOperationCategory.setAttribute('selected', 'selected');\r\n        }\r\n        // amount\r\n        this.operationAmountInputElement.value = operation.amount;\r\n        // date\r\n        this.operationDateInputElement.value = operation.date;\r\n        // comment\r\n        this.operationCommentElement.value = operation.comment;\r\n    }\r\n\r\n    validateAllFields() {\r\n        this.clearInvalidFieldsStyle();\r\n        const isValidType = this.validateField(this.operationTypeInputSelectorElement);\r\n        const isValidCategory = this.validateField(this.operationCategoryInputElement);\r\n        const isValidAmount = this.validateAmount(this.operationAmountInputElement);\r\n        const isValidDate = this.validateDate(this.operationDateInputElement);\r\n        const isValidComment = this.validateField(this.operationCommentElement);\r\n\r\n        const areFieldsValid = isValidType && isValidCategory && isValidAmount && isValidDate && isValidComment;\r\n        return areFieldsValid;\r\n    }\r\n\r\n    clearInvalidFieldsStyle() {\r\n        this.operationTypeInputSelectorElement.classList.remove('border-danger');\r\n        this.operationCategoryInputElement.classList.remove('border-danger');\r\n        this.operationAmountInputElement.classList.remove('border-danger');\r\n        this.operationDateInputElement.classList.remove('border-danger');\r\n        this.operationCommentElement.classList.remove('border-danger');\r\n    }\r\n\r\n    validateField(field) {\r\n        if (field.value) {\r\n            return true;\r\n        } else {\r\n            field.classList.add('border-danger');\r\n            return false;\r\n        }\r\n    }\r\n\r\n    validateAmount(field) {\r\n        if (field.value && field.value > 0) {\r\n            return true;\r\n        } else {\r\n            field.classList.add('border-danger');\r\n            return false;\r\n        }\r\n    }\r\n\r\n    validateDate(field) {\r\n        const regex = /^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;\r\n        if (field.value) {\r\n            if (regex.test(field.value)) {\r\n                return true;\r\n            } else {\r\n                field.classList.add('border-danger');\r\n                return false;\r\n            }\r\n        } else {\r\n            field.classList.add('border-danger');\r\n            return false;\r\n        }\r\n    }\r\n\r\n    defaultCategories() {\r\n        this.operationCategoryInputElement.innerHTML = '';\r\n        const option = document.createElement('option');\r\n        option.setAttribute('value', '');\r\n        option.innerText = 'Категория...';\r\n        this.operationCategoryInputElement.appendChild(option);\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/components/operation_actions.js?");

/***/ }),

/***/ "./src/router.js":
/*!***********************!*\
  !*** ./src/router.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Router: () => (/* binding */ Router)\n/* harmony export */ });\n/* harmony import */ var _components_entranceForm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/entranceForm.js */ \"./src/components/entranceForm.js\");\n/* harmony import */ var _components_main_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/main.js */ \"./src/components/main.js\");\n/* harmony import */ var _services_auth_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services/auth.js */ \"./src/services/auth.js\");\n/* harmony import */ var _components_income_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/income.js */ \"./src/components/income.js\");\n/* harmony import */ var _utils_balance_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/balance.js */ \"./src/utils/balance.js\");\n/* harmony import */ var _components_login_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/login.js */ \"./src/components/login.js\");\n/* harmony import */ var _components_income_create_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/income_create.js */ \"./src/components/income_create.js\");\n/* harmony import */ var _components_income_edit_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/income_edit.js */ \"./src/components/income_edit.js\");\n/* harmony import */ var _components_expense_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/expense.js */ \"./src/components/expense.js\");\n/* harmony import */ var _components_expense_create_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/expense_create.js */ \"./src/components/expense_create.js\");\n/* harmony import */ var _components_expense_edit_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./components/expense_edit.js */ \"./src/components/expense_edit.js\");\n/* harmony import */ var _components_income_expense_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/income_expense.js */ \"./src/components/income_expense.js\");\n/* harmony import */ var _components_create_operation_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/create_operation.js */ \"./src/components/create_operation.js\");\n/* harmony import */ var _components_edit_operation_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/edit_operation.js */ \"./src/components/edit_operation.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Router {\r\n    constructor() {\r\n        this.titleElement = document.getElementById('pageTitle');\r\n        this.stylesElement = document.getElementById('templateStyle');\r\n        this.templateContentElement = document.getElementById('templateContent');\r\n\r\n        new _utils_balance_js__WEBPACK_IMPORTED_MODULE_4__.Balance();\r\n\r\n        this.routes = [\r\n            {\r\n                route: '#/login',\r\n                title: 'Вход',\r\n                template: 'templates/login.html',\r\n                styles: 'styles/login.css',\r\n                load: () => {\r\n                    new _components_login_js__WEBPACK_IMPORTED_MODULE_5__.Login();\r\n                    new _components_entranceForm_js__WEBPACK_IMPORTED_MODULE_0__.EntranceForm('login');\r\n                }\r\n            },\r\n            {\r\n                route: '#/signup',\r\n                title: 'Регистрация',\r\n                template: 'templates/signup.html',\r\n                styles: 'styles/login.css',\r\n                load: () => {\r\n                    new _components_login_js__WEBPACK_IMPORTED_MODULE_5__.Login();\r\n                    new _components_entranceForm_js__WEBPACK_IMPORTED_MODULE_0__.EntranceForm('signup');\r\n                }\r\n            },\r\n            {\r\n                route: '#/main',\r\n                title: 'Главная',\r\n                template: 'templates/main.html',\r\n                styles: 'styles/main.css',\r\n                load: () => {\r\n                    new _components_main_js__WEBPACK_IMPORTED_MODULE_1__.Main();\r\n                }\r\n            },\r\n            {\r\n                route: '#/income',\r\n                title: 'Доходы',\r\n                template: 'templates/income.html',\r\n                styles: '',\r\n                load: () => {\r\n                    new _components_income_js__WEBPACK_IMPORTED_MODULE_3__.Income();\r\n                }\r\n            },\r\n            {\r\n                route: '#/income/new',\r\n                title: 'Создание категории доходов',\r\n                template: 'templates/income_create.html',\r\n                styles: '',\r\n                load: () => {\r\n                    new _components_income_create_js__WEBPACK_IMPORTED_MODULE_6__.IncomeCreate();\r\n                }\r\n            },\r\n            {\r\n                route: '#/income/edit',\r\n                title: 'Редактирование категории доходов',\r\n                template: 'templates/income_edit.html',\r\n                styles: '',\r\n                load: () => {\r\n                    new _components_income_edit_js__WEBPACK_IMPORTED_MODULE_7__.IncomeEdit();\r\n                }\r\n            },\r\n            {\r\n                route: '#/expense',\r\n                title: 'Расходы',\r\n                template: 'templates/expense.html',\r\n                styles: '',\r\n                load: () => {\r\n                    new _components_expense_js__WEBPACK_IMPORTED_MODULE_8__.Expense();\r\n                }\r\n            },\r\n            {\r\n                route: '#/expense/new',\r\n                title: 'Создание категории расходов',\r\n                template: 'templates/expense_create.html',\r\n                styles: '',\r\n                load: () => {\r\n                    new _components_expense_create_js__WEBPACK_IMPORTED_MODULE_9__.ExpenseCreate();\r\n                }\r\n            },\r\n            {\r\n                route: '#/expense/edit',\r\n                title: 'Редактирование категории расходов',\r\n                template: 'templates/expense_edit.html',\r\n                styles: '',\r\n                load: () => {\r\n                    new _components_expense_edit_js__WEBPACK_IMPORTED_MODULE_10__.ExpenseEdit();\r\n                }\r\n            },\r\n            {\r\n                route: '#/operations',\r\n                title: 'Доходы и расходы',\r\n                template: 'templates/income_expense.html',\r\n                styles: 'styles/incomes_expenses.css',\r\n                load: () => {\r\n                    new _components_income_expense_js__WEBPACK_IMPORTED_MODULE_11__.IncomeExpense();\r\n                }\r\n            },\r\n            {\r\n                route: '#/operations/create_income',\r\n                title: 'Создание дохода',\r\n                template: 'templates/create_operation.html',\r\n                styles: 'styles/incomes_expenses.css',\r\n                load: () => {\r\n                    new _components_create_operation_js__WEBPACK_IMPORTED_MODULE_12__.CreateOperation('income');\r\n                }\r\n            },\r\n            {\r\n                route: '#/operations/create_expense',\r\n                title: 'Создание расхода',\r\n                template: 'templates/create_operation.html',\r\n                styles: 'styles/incomes_expenses.css',\r\n                load: () => {\r\n                    new _components_create_operation_js__WEBPACK_IMPORTED_MODULE_12__.CreateOperation('expense');\r\n                }\r\n            },\r\n            {\r\n                route: '#/operations/edit_operation',\r\n                title: 'Редактирование дохода/расхода',\r\n                template: 'templates/edit_operation.html',\r\n                styles: 'styles/create_incomes_expenses.css',\r\n                load: () => {\r\n                    new _components_edit_operation_js__WEBPACK_IMPORTED_MODULE_13__.EditOperation('incomeExpense');\r\n                }\r\n            },\r\n        ];\r\n    }\r\n\r\n    async openRoute() {\r\n        const currentUrlRoute = window.location.hash.split('?')[0];\r\n\r\n        if (currentUrlRoute === '#/logout') {\r\n            await _services_auth_js__WEBPACK_IMPORTED_MODULE_2__.Auth.logout();\r\n            window.location.href = '#/login';\r\n            return;\r\n        }\r\n\r\n        const newRoute = this.routes.find(item => {\r\n            return item.route === currentUrlRoute;\r\n        });\r\n\r\n        if (!newRoute) {\r\n            window.location.href = '#/login';\r\n            return;\r\n        }\r\n\r\n        this.templateContentElement.innerHTML = await fetch(newRoute.template).then(response => response.text());\r\n        this.stylesElement.setAttribute('href', newRoute.styles);\r\n        this.titleElement.innerText = newRoute.title;\r\n\r\n        newRoute.load();\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/router.js?");

/***/ }),

/***/ "./src/services/auth.js":
/*!******************************!*\
  !*** ./src/services/auth.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Auth: () => (/* binding */ Auth)\n/* harmony export */ });\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n\r\n\r\nclass Auth {\r\n    static accessTokenKey = 'accessToken';\r\n    static refreshTokenKey = 'refreshToken';\r\n    static userInfoKey = 'userInfo';\r\n\r\n    static async processUnauthorizedResponse() {\r\n\r\n        const currentUrlRoute = window.location.hash.split('?')[0];\r\n\r\n        const refreshToken = localStorage.getItem(this.refreshTokenKey);\r\n        if (refreshToken) {\r\n            const response = await fetch(_config_config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].host + '/refresh', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                },\r\n                body: JSON.stringify({refreshToken: refreshToken})\r\n            });\r\n\r\n            if (response && response.status === 200) {\r\n                const result = await response.json();\r\n                if (result && !result.error) {\r\n                    this.setTokens(result.tokens.accessToken, result.tokens.refreshToken);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        this.removeTokens();\r\n        if (currentUrlRoute === '#/login' || currentUrlRoute === '#/signup') {\r\n            return false;\r\n        }\r\n        location.href = '#/login';\r\n        return false;\r\n    }\r\n\r\n    static async logout() {\r\n        const refreshToken = localStorage.getItem(this.refreshTokenKey);\r\n        if (refreshToken) {\r\n            const response = await fetch(_config_config_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].host + '/logout', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'Accept': 'application/json',\r\n                },\r\n                body: JSON.stringify({refreshToken: refreshToken})\r\n            });\r\n            if (response && response.status === 200) {\r\n                const result = await response.json();\r\n                if (result && !result.error) {\r\n                    this.removeTokens();\r\n                    localStorage.removeItem(this.userInfoKey);\r\n                    localStorage.removeItem(this.userInfoKey);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static setTokens(accessToken, refreshToken) {\r\n        localStorage.setItem(this.accessTokenKey, accessToken);\r\n        localStorage.setItem(this.refreshTokenKey, refreshToken);\r\n    }\r\n\r\n    static removeTokens() {\r\n        localStorage.removeItem(this.accessTokenKey);\r\n        localStorage.removeItem(this.refreshTokenKey);\r\n    }\r\n\r\n    static setUserInfo(info) {\r\n        localStorage.setItem(this.userInfoKey, JSON.stringify(info));\r\n    }\r\n\r\n    static getUserInfo() {\r\n        const userInfo = localStorage.getItem(this.userInfoKey);\r\n        if (userInfo) {\r\n            return JSON.parse(userInfo);\r\n        }\r\n        return null;\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/services/auth.js?");

/***/ }),

/***/ "./src/services/custom-http.js":
/*!*************************************!*\
  !*** ./src/services/custom-http.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomHttp: () => (/* binding */ CustomHttp)\n/* harmony export */ });\n/* harmony import */ var _auth_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth.js */ \"./src/services/auth.js\");\n\r\n\r\nclass CustomHttp {\r\n    static async httpRequest(url, method = \"GET\", body = null) {\r\n        const params = {\r\n            method: method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'Accept': 'application/json',\r\n            }\r\n        };\r\n        let token = localStorage.getItem(_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.accessTokenKey);\r\n        if (token) {\r\n            params.headers['x-auth-token'] = token;\r\n        }\r\n\r\n        if (body) {\r\n            params.body = JSON.stringify(body);\r\n        }\r\n\r\n        const response = await fetch(url, params);\r\n\r\n        if (response.status < 200 || response.status >= 300) {\r\n            if (response.status === 401) {\r\n                const result = await _auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.processUnauthorizedResponse();\r\n                if(result) {\r\n                    return await this.httpRequest(url, method, body);\r\n                } else {\r\n                    return response.status;\r\n                }\r\n            }\r\n            if (response.status === 400) {\r\n                return response.status;\r\n            }\r\n            if (response.status === 404) {\r\n                return response.status;\r\n            }\r\n            throw new Error(response.message);\r\n        }\r\n        return await response.json();\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/services/custom-http.js?");

/***/ }),

/***/ "./src/utils/balance.js":
/*!******************************!*\
  !*** ./src/utils/balance.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Balance: () => (/* binding */ Balance)\n/* harmony export */ });\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n\r\n\r\n\r\nclass Balance {\r\n    constructor() {\r\n        this.templateContentElement = document.getElementById('templateContent');\r\n        this.currentBalanceWrapperElement = document.getElementById('currentBalanceWrapper');\r\n\r\n        this.setBalanceEventDefinition();\r\n    }\r\n\r\n    setBalanceEventDefinition() {\r\n        this.currentBalanceWrapperElement.addEventListener('click', () => {\r\n            this.createBalanceModal();\r\n        });\r\n    }\r\n\r\n    createBalanceModal() {\r\n        const modalWrapper = document.createElement('div');\r\n        modalWrapper.className = 'show action-modal position-absolute h-100 w-100 align-items-center justify-content-center';\r\n        modalWrapper.setAttribute('id', 'modalBalanceWrapper');\r\n\r\n        const modalContent = document.createElement('div');\r\n        modalContent.className = 'action-modal-content modal-content bg-body';\r\n\r\n        const modalBody = document.createElement('div');\r\n        modalBody.className = 'modal-body d-flex flex-column justify-content-between align-items-center';\r\n\r\n        const modalText = document.createElement('p');\r\n        modalText.className = 'action-modal-text m-0';\r\n        modalText.innerText = 'Укажите текущий баланс ($) :';\r\n\r\n        const modalInput = document.createElement('input');\r\n        modalInput.setAttribute('id', 'balanceInput');\r\n        modalInput.setAttribute('type', 'text');\r\n        modalInput.className = 'w-75 form-control text-center';\r\n\r\n        const modalActionWrapper = document.createElement('div');\r\n        modalActionWrapper.className = 'action-buttons d-flex justify-content-center';\r\n\r\n        const actionEdit = document.createElement('button');\r\n        actionEdit.className = 'btn-common btn-modal-delete btn border-0 btn-success';\r\n        actionEdit.innerText = 'ОК';\r\n\r\n        const actionCancel = document.createElement('button');\r\n        actionCancel.className = 'btn-common btn-modal-no-delete btn border-0 btn-danger';\r\n        actionCancel.setAttribute('id', 'balanceActionCancel');\r\n        actionCancel.innerText = 'Отмена';\r\n\r\n        modalWrapper.appendChild(modalContent);\r\n        modalContent.appendChild(modalBody);\r\n        modalBody.appendChild(modalText);\r\n        modalBody.appendChild(modalInput);\r\n        modalBody.appendChild(modalActionWrapper);\r\n        modalActionWrapper.appendChild(actionEdit);\r\n        modalActionWrapper.appendChild(actionCancel);\r\n\r\n        this.templateContentElement.after(modalWrapper);\r\n\r\n        modalWrapper.addEventListener('click', (event) => {\r\n            if (event.eventPhase === 2) {\r\n                this.removeBalanceModal();\r\n            }\r\n        });\r\n        actionCancel.addEventListener('click', () => {\r\n            this.removeBalanceModal();\r\n        });\r\n        actionEdit.addEventListener('click', async () => {\r\n            modalInput.classList.remove('border-danger');\r\n            if (modalInput.value) {\r\n                try {\r\n                    const result = await this.setNewBalance(parseInt(modalInput.value));\r\n                    if (result) {\r\n                        await Balance.showBalance().then();\r\n                        this.removeBalanceModal();\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            } else {\r\n                modalInput.classList.add('border-danger');\r\n            }\r\n        });\r\n        modalInput.addEventListener('keydown', function (event) {\r\n            const regex = /[0-9]/\r\n            if (!regex.test(event.key) && event.key.toLowerCase() !== 'backspace') {\r\n                event.preventDefault();\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n\r\n    removeBalanceModal() {\r\n        document.querySelectorAll('#modalBalanceWrapper').forEach(element => element.remove());\r\n    }\r\n\r\n    async setNewBalance(newBalance) {\r\n        const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/balance', 'PUT', {\r\n            newBalance: newBalance\r\n        });\r\n        return result ? true : false;\r\n    }\r\n\r\n    static async showBalance() {\r\n        const currentBalanceElement = document.getElementById('currentBalance');\r\n        try {\r\n            const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/balance');\r\n            if (result) {\r\n                currentBalanceElement.innerText = `${result.balance}$`;\r\n                return result;\r\n            } else {\r\n                currentBalanceElement.innerText = 0;\r\n                return 0;\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n}\n\n//# sourceURL=webpack://frontend/./src/utils/balance.js?");

/***/ }),

/***/ "./src/utils/income-expense-process.js":
/*!*********************************************!*\
  !*** ./src/utils/income-expense-process.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IncomeExpenseProcess: () => (/* binding */ IncomeExpenseProcess)\n/* harmony export */ });\n/* harmony import */ var _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/custom-http.js */ \"./src/services/custom-http.js\");\n/* harmony import */ var _config_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/config.js */ \"./config/config.js\");\n\r\n\r\n\r\nclass IncomeExpenseProcess {\r\n    static async getCategoriesIncomeExpense(route) {\r\n        if (route === 'income') {\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/income');\r\n                if (result) {\r\n                    return result;\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n\r\n        }\r\n        if (route === 'expense') {\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/expense');\r\n                if (result) {\r\n                    return result;\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    static createIncomeExpense(array) {\r\n        if (array && array.length > 0) {\r\n            const categoriesElement = document.querySelector('.categories');\r\n            array.forEach(arrayItem => {\r\n                const categoryItemElement = document.createElement('div');\r\n                categoryItemElement.setAttribute('id', arrayItem.id);\r\n                categoryItemElement.className = 'category-item card flex-shrink-0';\r\n\r\n                const categoryItemBodyElement = document.createElement('div');\r\n                categoryItemBodyElement.className = 'category-item-body d-flex flex-column justify-content-between card-body';\r\n\r\n                const categoryTitleElement = document.createElement('p');\r\n                categoryTitleElement.className = 'category-title m-0';\r\n                categoryTitleElement.innerText = arrayItem.title;\r\n\r\n                const categoryItemButtonsElement = document.createElement('div');\r\n                categoryItemButtonsElement.className = 'category-item-buttons d-flex';\r\n\r\n\r\n                const buttonEditElement = document.createElement('button');\r\n                buttonEditElement.className = 'btn-common btn-edit btn btn-primary';\r\n                buttonEditElement.innerText = 'Редактировать';\r\n\r\n                const buttonDeleteElement = document.createElement('button');\r\n                buttonDeleteElement.className = 'btn-common btn-delete btn btn-danger';\r\n                buttonDeleteElement.innerText = 'Удалить';\r\n\r\n                categoryItemElement.appendChild(categoryItemBodyElement);\r\n                categoryItemBodyElement.appendChild(categoryTitleElement);\r\n                categoryItemBodyElement.appendChild(categoryItemButtonsElement);\r\n                categoryItemButtonsElement.appendChild(buttonEditElement);\r\n                categoryItemButtonsElement.appendChild(buttonDeleteElement);\r\n\r\n                categoriesElement.prepend(categoryItemElement);\r\n            });\r\n        }\r\n    }\r\n\r\n    static deleteIncomeExpense(route, id, categoryName) {\r\n        const routeIncome = 'income';\r\n        const routeExpense = 'expense';\r\n\r\n        const templateContentElement = document.getElementById('templateContent');\r\n        const modalWrapper = document.createElement('div');\r\n\r\n        modalWrapper.className = 'show action-modal position-absolute h-100 w-100 align-items-center justify-content-center';\r\n        modalWrapper.setAttribute('id', 'modalIncomeExpense');\r\n\r\n        const modalContent = document.createElement('div');\r\n        modalContent.className = 'action-modal-content modal-content bg-body';\r\n\r\n        const modalBody = document.createElement('div');\r\n        modalBody.className = 'modal-body d-flex flex-column justify-content-between align-items-center';\r\n\r\n        const modalText = document.createElement('p');\r\n        modalText.className = 'action-modal-text m-0';\r\n        const category = route === routeIncome ? 'доходы' : 'расходы';\r\n        modalText.innerText = `Вы действительно хотите удалить категорию? Связанные ${category} будут удалены навсегда.`;\r\n\r\n        const modalActionWrapper = document.createElement('div');\r\n        modalActionWrapper.className = 'action-buttons d-flex justify-content-center';\r\n\r\n        const actionEdit = document.createElement('button');\r\n        actionEdit.className = 'btn-common btn-modal-delete btn border-0 btn-success';\r\n        actionEdit.innerText = 'Да, удалить';\r\n\r\n        const actionCancel = document.createElement('button');\r\n        actionCancel.className = 'btn-common btn-modal-no-delete btn border-0 btn-danger';\r\n        actionCancel.setAttribute('id', 'balanceActionCancel');\r\n        actionCancel.innerText = 'Не удалять';\r\n\r\n        modalWrapper.appendChild(modalContent);\r\n        modalContent.appendChild(modalBody);\r\n        modalBody.appendChild(modalText);\r\n        modalBody.appendChild(modalActionWrapper);\r\n        modalActionWrapper.appendChild(actionEdit);\r\n        modalActionWrapper.appendChild(actionCancel);\r\n\r\n        templateContentElement.after(modalWrapper);\r\n\r\n        modalWrapper.addEventListener('click', (event) => {\r\n            if (event.eventPhase === 2) {\r\n                this.removeModalIncomeExpense();\r\n            }\r\n        });\r\n        actionCancel.addEventListener('click', () => {\r\n            this.removeModalIncomeExpense();\r\n        });\r\n        actionEdit.addEventListener('click', async () => {\r\n            if (route === routeIncome) {\r\n                await IncomeExpenseProcess.deleteCurrentCategoryOperations(categoryName, route);\r\n                try {\r\n                    const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/income/' + id, 'DELETE');\r\n                    if (result && !result.error) {\r\n                        modalWrapper.remove();\r\n                        location.href = '#/income';\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n\r\n            }\r\n            if (route === routeExpense) {\r\n                await IncomeExpenseProcess.deleteCurrentCategoryOperations(categoryName, route);\r\n                try {\r\n                    const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/expense/' + id, 'DELETE');\r\n                    if (result && !result.error) {\r\n                        modalWrapper.remove();\r\n                        location.href = '#/expense';\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    static async deleteCurrentCategoryOperations(categoryName, type) {\r\n        const getAllOperations = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/operations?period=all');\r\n        if (getAllOperations) {\r\n            let allCurrentCategoryOperations = getAllOperations.filter(operation => {\r\n                return operation.category === categoryName && operation.type === type;\r\n            });\r\n            if (allCurrentCategoryOperations && allCurrentCategoryOperations.length > 0) {\r\n                allCurrentCategoryOperations.forEach(operation => {\r\n                    _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/operations/' + operation.id, 'DELETE');\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    static removeModalIncomeExpense() {\r\n        document.querySelectorAll('#modalIncomeExpense').forEach(element => element.remove());\r\n    }\r\n\r\n    static async getIncomeExpense(route, id) {\r\n        if (route === 'income') {\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/income/' + id);\r\n                if (result && result !== 404) {\r\n                    return result.title;\r\n                }\r\n                if (result === 404) {\r\n                    location.href = '#/income';\r\n                    return;\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        if (route === 'expense') {\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/expense/' + id);\r\n                if (result && result !== 404) {\r\n                    return result.title;\r\n                }\r\n                if (result === 404) {\r\n                    location.href = '#/expense';\r\n                    return;\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    static async editIncomeExpense(route, id, value) {\r\n        if (route === 'income') {\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/income/' + id, 'PUT', {\r\n                    title: value\r\n                });\r\n                if (result) {\r\n                    location.href = '#/income'\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        if (route === 'expense') {\r\n            try {\r\n                const result = await _services_custom_http_js__WEBPACK_IMPORTED_MODULE_0__.CustomHttp.httpRequest(_config_config_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].host + '/categories/expense/' + id, 'PUT', {\r\n                    title: value\r\n                });\r\n                if (result) {\r\n                    location.href = '#/expense'\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/utils/income-expense-process.js?");

/***/ }),

/***/ "./src/utils/url-manager.js":
/*!**********************************!*\
  !*** ./src/utils/url-manager.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UrlManager: () => (/* binding */ UrlManager)\n/* harmony export */ });\nclass UrlManager {\r\n\r\n    static getQueryParams() {\r\n        const qs = document.location.hash.split('+').join(' ');\r\n\r\n        let params = {},\r\n            tokens,\r\n            re = /[?&]([^=]+)=([^&]*)/g;\r\n\r\n        while (tokens = re.exec(qs)) {\r\n            params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\r\n        }\r\n\r\n        return params;\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/utils/url-manager.js?");

/***/ }),

/***/ "./src/utils/userName.js":
/*!*******************************!*\
  !*** ./src/utils/userName.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserName: () => (/* binding */ UserName)\n/* harmony export */ });\n/* harmony import */ var _services_auth_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/auth.js */ \"./src/services/auth.js\");\n\r\n\r\nclass UserName {\r\n    static async setUserName() {\r\n        const userDataElement = document.getElementById('userData');\r\n        const userData = _services_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.getUserInfo();\r\n        if (userData) {\r\n            userDataElement.innerText = `${userData.name} ${userData.lastName}`;\r\n        } else {\r\n            await _services_auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth.logout();\r\n            window.location.href = '#/login';\r\n            return;\r\n        }\r\n    }\r\n}\n\n//# sourceURL=webpack://frontend/./src/utils/userName.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/app.js");
/******/ 	
/******/ })()
;